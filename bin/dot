#!/bin/sh
#
# dot
#
# `dot` handles installation, updates, things like that. Run it periodically
# to make sure you're on the latest and greatest.
export ZSH=$HOME/.dotfiles

if test "$(uname)" = "Darwin"; then
  $ZSH/osx/set-defaults.sh
  $ZSH/bin/start_dns_watch
fi

# Upgrade appications and dependencies and other stuff
if test "$(uname)" = "Darwin"; then
  brew update
  brew upgrade
  brew cask upgrade
  brew cleanup --prune 0
else
  sudo apt-get update
  sudo apt-get upgrade -y
  sudo apt-get autoclean -y
  sudo snap refresh
fi

gem update
gem clean
yarn global upgrade
vim +PlugUpgrade +PlugUpdate +PlugClean +qa

if test "$(uname)" = "Darwin"; then
  $ZSH/bin/stop_dns_watch
fi
